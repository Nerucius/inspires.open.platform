# InSPIRES Platform Web Application

alberto.torres@isglobal.org
samuel.espinal@isglobal.org

Contact Us ->
	inspires@isglobal.org
	
LEARN:
	- [X] AR content changes page locale to AR (right aligned text)
	

## 2021-06-02 Learn Center

- Rating (1-5) and a text form box
	- Per user (profile data), module, language, rating, suggestion 
	- Evaluation should be public, also store 

- Valentina to send a PDF wishlist in the design
	

	
## 2021-05-17 Task List

**To review**

- [X] Attachments en proyectos y estructuras validadas
	- [X] Proyectos
	- [ ] Estructuras
 	- [ ] 5 attachments de maximo 10MB
	- [X] Refresh attachment list when file is uploaded
	- [X] Hide EDIT button for non-editors
	
- [X] New multi-picklist field for Structures: network
	- [X] Se tiene que poder ampliar el listado de networks
	- Lista temporal:
		- Living Knowledge International network 
		- Italian speaking network
		- French speaking network
		- IberoAmerican network
		- más...

**Pending POR ORDEN DE PRIORIDAD**

- [X] Project Manage
	- [X] Make more fields mandatory
		- Fecha de creacion
		- Tipo de estructura / proyectos
		- Areas de conocimiento
	- [X] NEW FIELDS: Year Started / Year Ended

- [X] Add "managers" column on structure export with `FirstName LastName <Email>;FirstName LastName <Email>;` (Email format)

- [~] Project Datamodel:
	- [X] Projects with more than 1 country
	- [ ] More than one structure (Partners)
	
- [ ] Contact Form (Buzon de sugerencias)

- [ ] Page translations (deadline PT 31 mayo, call a partners para traducir todo 6 jun)
	- [X] PT completed
	- [ ] Upload final translations to crowdin

- [ ] VU
	- [ ] Feedback form for Courses
	- [ ] Style request by Valentina (deadline 7 jun)

- [ ] Homepage Video + Remaquetar

- [ ] Colibri
	- [ ] N and stats dont show on Edge / Safari

- [~] Improve shareability and SEO Tags
	- [X] OpenData graph (facebook + twitter + whatsapp)
	- [ ] Share on Facebook / Tweet this / Linkedin

- [~] About Us
	- [ ] New lines from AS
	- [X] Partner list from https://inspiresproject.com/partners-advisory-board/
		+ LK + UNESCO
		+ FIOCRUZ (AS)
			- cambiar link a: http://www.fiocruz.br/ioclabs/cgi/cgilua.exe/sys/start.htm?sid=201
			- Logos de Rita
		- [ ] UNESCO requires written auth to use logos etc
			https://en.unesco.org/logopatronage
		+ https://www.unescochair-cbrsr.org/
		+ http://www.ub.edu/opensystems/

- [ ] Account:
	- [ ] Upload Image for USER Avatars



## 2021-05-11 LK Meeting to Redefine LK

- Objective Redefine the network
- Website
	- Last relaunch was 2015-16
	- CMS is very old and not supported
	- Looking for a well known CMS system 
	- Also a visual facelift: Think about what the LK need / want from the website
		- What do they want? Exchange / Discussion / Information / Events
	- AS:
		- Inspires OP is at liberty to expand the website to include almost anything
		- We don't want the platform to fall from use or the work to be for naught
	- Norbert:
		- Do we want 1 big pot with everything or 2 separate things (LK + IOP)
	- Michaela WILA:
		- I prefer that we join toghether everything under one website
	- Glen: Big fan of wordpress
	- Norbert:
		- https://www.scishops.eu/
		- https://www.euronews.com/2021/04/19/eu-launches-digital-platform-to-let-citizens-debate-the-bloc-s-future
	

## 2021-04-23 meeting with VU

- Course will have around 50 videos
- Modules will have "expandable sections" of content
- Check youtube iframing
- Grant access
	- eduardourias
	- ValentinaVodopivec

## 2021-03-23 Meeting and Tasks:

### Review later

- Descuento BarnaClinic IsGLOBAL
- Hablar con samuel para vacuna
- Ticket restaurante
- Ticket transporte

- Escribir al equipo Eduardo y Durwin (Universidad Libre de Amsterdam / ATENA Research Institute)
- Investigar facturar hasta 2000€ sin ser autonomo
- Investigar crowdsourcing de traducciones en Youtube

### To review in the meeting

- Help center new styles and adjusted existing docs
- Help visible on Project Manage
	- Self evaluation questionnaire in phases tab
- Help dialogs 

**Fix translations for labels:**

pages.evaluationDetail.help.bulletChart.
	"participatoryDynamics "
	"transformativeChange "

## 2021-03-05 Meeting with Durwin / Eduardo

- Durwin: 
	Joined less than a years ago. Supporting the work package and developing the learing materials for science shops.
- Eduardo:
	Part of Inspires / Systems professor now in charge of developing learning materials
	
Host educational materials in the inspires platform (E-learning modules).
5 Modules and some videos showing the competences.

Landing page with some Intro text and the modules list

Per module page:
	- Introduction
	- Learning Goals


## 2021-02-22 Inspires Help Center - Irene

- [X] Self reflection questionnaire 1 & 2: Tabla enmarcada con colores.


## 2021-02-05 Task list
		
- [X] Export entire evaluation from evaluation view page
	- [X] Review process

- [X] Project Public page:
	- [X] Add "poetic" evaluation help to the public evaluation view
		
- [X] Project Management -> phases
	- Add eval Q1
	- Add eval Q2

- [X] Evaluation Graph -> Involvement
	- Change x-label to Real | Effective

- Help center:
	- [X] Arab slugs dont work
	- [X] Language icons should be a link to that article in the language
	- [X] Sort flag icons Help Center
	- [X] Meeting with Dutch people to integrate eLearning module
	
	- [X] Notas de Irene:
		- [X] En la  "Guide 1" los cuerpos de texto no quedan alineados. 
		- [X] En la "Guide 2", el fondo ha quedado en gris (no queda mal, ni es grave, pero no sé por qué esta guía ha quedado gris y en otras blancas). Además, las imágenes quedan muy desordenadas porque no están alineadas. 
		- [X] La "Guide 3", no está del todo mal. El icono del "plus" verde queda muy raro, pero quizás se puede quitar. Los textos e imágenes no están alineados
		- [X] La "Guide 4", no queda del todo mal pero el texto no está alineado. 
		- [X] En la "Guide 5", textos no alineados
		- [X] En la "Guide 6", textos no alineados
		- [X] En los "Self-reflection questionnaires", como comentamos, vendría bien añadir un sombreado alternado en las filas. Y mejorar el formato de la tabla para lograr mejor visibilidad del Self-reflection questionnaire 2.
		
- Home
	- [X] Latest updates -> Latest project updates
	
- Structures
	- [X] Add filter for KA, Country, Structure Type
	
- Project list
	- [X] Make "Show evaluations" visible for general public??

- Crear un nuevo email para cuando se valida una estructura
	- [X] Enviar a los managers

- Administracion:
	- [X] Desvalidar estructuras
	

## 2021-01-22 Meeting

- Ayuda para leer los graficos:
	- Textos casi listos. Irene a enviarme el documento cuando este listos

- Problema con los Emails:
	- Joan Vericat
	- Alberto Torres<alberto.torres@isglobal.org>
	- Irene / Valeria / Sophie

- Safari inconsistent evaluation results
	- https://app.inspiresproject.com/projects/21
	- In "All projects" page, safari loads all projects as "max score"
	
- SEO / Google Analitycs:
	- Enviar export de datos a Irene
	- Matomo goal attainment

## README

This repository contains the source files and build and deployment instructions for the InSPIRES Open Platform project, under the bigger european InSPIRES Project [(Ingenious Science shops to promote Participatory Innovation, Research and Equity in Science)](https://cordis.europa.eu/project/rcn/210055/factsheet/en).

## Architecture Overview

![Architecture Overview](https://cloud.carrotpiracy.com/index.php/s/scRc3Gw6NCjdXrx/preview)

The repository provides the neccesary elements to spawn a docker process and configure an Apache VirtualHost to serve from one single server two domains, each acting respectively as front-end and back-end. If it were necesary in the future, the front end and back end can be separated into two different servers.

The host's apache acts as an **SSL termination**, and all intra-host communication is performed safe from outside interference and with unencrypted HTTP sockets.

All configuration parameters can be adapted using the provided `.env.sample file`.

# Deployment Instructions

## Step by Step

To deploy the platform to a new server, first make sure you have installed all of the required software in the section `Required software on Host`.

1. Clone the repository to a folder. It is suggested to use `/opt/docker/<folder>` for this purpose.
1. Copy the `.env.sample` file at the root of the folder to `.env`. Ignore other `.env.sample` files inside the `django` and `vuetify` folders.
1. Configure the new `.env` file to your needs.
1. Create a new Apache2 VirtualHost using the `apache.vhost.conf` file in the root folder. Configure this host with proper SSL certificates and adapt to your needs. Make sure the domains and ports in the virtualhost configuration match with the `.env` file you previously configured.
1. Restart Apache2 if you haven't done so yet.
1. Open port `80` and `443` on the server's firewall.
1. At the root folder. run the command `docker-compose up`
1. All docker containers should spin up and open their configured ports internally to the machine.
1. The setup is complete.

### Required software on Host

1. Docker-CE
2. Apache2 (mod_headers + mod_ssl)

HTTPS Certificates can be obtained throuh letsencrypt `certbot-auto` software.

## Custom HTTPS header for Django

As HTTPS is handled by Apache on the host system, communication between the host
and docker is donde through unencrypted HTTP sockets. Due to this, Django needs a way
to know that it is behind an HTTPS proxy to generate reverse URLS with the `https://`
protocol. As included in the provided virtualhost files, this header is passed by apache
to the UWGSI server executing the WSGI django application.

The HTTP Header used is `X-Forwarded-Proto`, which later is transformed into
`HTTP_X_FORWARDED_PROTO` by the system and correctly interpreted by the `server/settings.py`
configuration.


## Development Instructions

### For frontend development

**Requirements**
- NodeJS 10 LTS

**Setup steps**
1. Open `vuetify` folder in VSCode.
1. Copy `.env.sample` to `.env`
1. Edit values in `.env` file to point to a remote server
    that is running the backend.
1. Run `npm run serve` to start the local testing environment in order
    to start development of the frontend. HMR is setup so there is no
    need to refresh the browser on code changes.

### For backend development:

You can configure the backend to use an SQLite DB and no Redis so that a simple dev enviroment can be bootstrapped easily.

**Requirements**
- Python3 + PIP

**Setup steps**
1. Open `vuetify` folder in VSCode.
1. Copy `.env.sample` to `.env`
1. Edit values in `.env` to suit your needs.
1. Run `virtualenv env` to create a new Python Virtual environment.
1. Activate the virtual environment (this depends on wether you run windows or linux, please check instructions specific to your OS)
1. Install the necesary packages `pip install -r requirements`.
1. Create the DB tables: `python manage.py migrate`
1. Run the server through the console: `python manage.py runserver localhost:<port defined in frontend .env>`
